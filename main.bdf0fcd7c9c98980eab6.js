(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"0g4g":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("TYT/"),r=function(){function t(){}return Object.defineProperty(t.prototype,"status",{set:function(t){["Closed","Open"].includes(t)&&(this.name+="-"+t.toLowerCase())},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-svg-icon"]],inputs:{name:"name",status:"status"},decls:2,vars:1,template:function(t,e){1&t&&(o.uc(),o.kc(0,"svg"),o.fc(1,"use"),o.jc()),2&t&&(o.Pb(1),o.Rb("href","assets/icons/nd-icons.svg#",e.name,"",null,"xlink"))},styles:["[_nghost-%COMP%], [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{all:inherit}"],changeDetection:0}),t}()},"3ncI":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("TYT/"),r=n("0g4g"),i=n("Valr"),c=function(t){return{pulse:t}},a=function(){function t(){this.slideIn=new o.r,this.slideOut=new o.r}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-toggle-settings-button"]],inputs:{animationState:"animationState"},outputs:{slideIn:"slideIn",slideOut:"slideOut"},decls:2,vars:4,consts:[[1,"toggle-settings",3,"click"],[1,"nd-gear",3,"ngClass","name"]],template:function(t,e){1&t&&(o.kc(0,"button",0),o.sc("click",(function(t){return"in"===e.animationState?e.slideOut.emit():e.slideIn.emit()})),o.fc(1,"nd-svg-icon",1),o.jc()),2&t&&(o.Pb(1),o.Bc("ngClass",o.Dc(2,c,"out"===e.animationState))("name","nd-gear"))},directives:[r.a,i.r],styles:[".nb-theme-default   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;background-image:linear-gradient(90deg,#00d9bf,#00d977);border:none;width:inherit;height:inherit;outline:none}.nb-theme-default   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear[_ngcontent-%COMP%]{width:100%;height:100%;fill:#fff}.nb-theme-default   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear.pulse[_ngcontent-%COMP%]{-webkit-animation-name:gear-pulse;animation-name:gear-pulse;-webkit-animation-delay:.2s;animation-delay:.2s;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.nb-theme-dark   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;background-image:linear-gradient(90deg,#00d9bf,#00d977);border:none;width:inherit;height:inherit;outline:none}.nb-theme-dark   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear[_ngcontent-%COMP%]{width:100%;height:100%;fill:#fff}.nb-theme-dark   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear.pulse[_ngcontent-%COMP%]{-webkit-animation-name:gear-pulse;animation-name:gear-pulse;-webkit-animation-delay:.2s;animation-delay:.2s;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.nb-theme-cosmic   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;background-image:linear-gradient(90deg,#00d9bf,#00d977);border:none;width:inherit;height:inherit;outline:none}.nb-theme-cosmic   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear[_ngcontent-%COMP%]{width:100%;height:100%;fill:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear.pulse[_ngcontent-%COMP%]{-webkit-animation-name:gear-pulse;animation-name:gear-pulse;-webkit-animation-delay:.2s;animation-delay:.2s;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;background-image:linear-gradient(90deg,#00d9bf,#00d977);border:none;width:inherit;height:inherit;outline:none}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear[_ngcontent-%COMP%]{width:100%;height:100%;fill:#fff}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .toggle-settings[_ngcontent-%COMP%]   .nd-gear.pulse[_ngcontent-%COMP%]{-webkit-animation-name:gear-pulse;animation-name:gear-pulse;-webkit-animation-delay:.2s;animation-delay:.2s;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes gear-pulse{0%{transform:scale3d(.8,.8,.8)}50%{transform:scaleX(1)}to{transform:scale3d(.8,.8,.8)}}@keyframes gear-pulse{0%{transform:scale3d(.8,.8,.8)}50%{transform:scaleX(1)}to{transform:scale3d(.8,.8,.8)}}@media (max-width:768px){.toggle-settings[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-right-radius:.5rem}}"],changeDetection:0}),t}()},"6I4f":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("26FU"),r=n("ad02"),i=n("FYXD"),c=n("TYT/"),a=function(){return(a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=function(){function t(){this.subject=new o.a({}),this.store=this.subject.asObservable().pipe(Object(r.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)}))),this.DB_NAME="NDDB",this.DB_VERSION=3,this.SETTINGS_STORE="domoticz_settings",this.PUSHSUB_STORE="push_subscription",this.ICON_STORE="device_icons",this.MONITOR_STORE="monitored_devices",this.THEME_STORE="theme"}return t.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.store.pipe(i.a.apply(void 0,t))},t.prototype.openDb=function(){var t=this,e=indexedDB.open(this.DB_NAME,this.DB_VERSION);return new Promise((function(n,o){e.onsuccess=(function(t){n(this.db=t.target.result)}).bind(t),e.onerror=function(t){o("openDb: "+t.target.error.message)},e.onupgradeneeded=(function(t){this.createStore(this.SETTINGS_STORE,"id",t),this.createStore(this.PUSHSUB_STORE,"id",t),this.createStore(this.THEME_STORE,"id",t),this.createStore(this.ICON_STORE,"idx",t),this.createStore(this.MONITOR_STORE,"idx",t)}).bind(t)}))},t.prototype.createStore=function(t,e,n){var o=n.target.result;o.objectStoreNames.contains(t)||o.createObjectStore(t,{keyPath:e})},t.prototype.getObjectStore=function(t,e){return(e?this.db.transaction(t,e):this.db.transaction(t)).objectStore(t)},t.prototype.addSettings=function(t){var e=this.getObjectStore(this.SETTINGS_STORE,"readwrite");try{if(Object.keys(t.credentials).every((function(e){return null!==t.credentials[e]}))){var n=btoa(t.credentials.username+":"+t.credentials.password);t.authToken=n,delete t.credentials}}catch(r){}var o=e.put(a({id:1},t));return new Promise((function(t,e){o.onsuccess=function(e){t("addSettings: "+e.type)},o.onerror=function(t){e("addSettings: "+t.target.error.message)}}))},t.prototype.syncSettings=function(t){var e=this;t?this.subject.next(a(a({},this.subject.value),{settings:null})):this.getObjectStore(this.SETTINGS_STORE,"readonly").get(1).onsuccess=(function(t){e.subject.next(a(a({},e.subject.value),{settings:e.decodeSettings(t.target.result)}))}).bind(this)},t.prototype.clearSettings=function(){var t=this.getObjectStore(this.SETTINGS_STORE,"readwrite").clear();return new Promise((function(e,n){t.onsuccess=function(t){e("clearSettings: "+t.type)},t.onerror=function(t){n("clearSettings: "+t.target.error.message)}}))},t.prototype.decodeSettings=function(t){return t&&t.authToken?a(a({},t),{credentials:{username:atob(t.authToken).split(":")[0],password:atob(t.authToken).split(":")[1]}}):t},t.prototype.getAllStore=function(t){var e=this.getObjectStore(t,"readonly").getAll();return new Promise((function(t,n){e.onsuccess=function(e){return t(e.target.result||[])},e.onerror=function(t){return n(t.target.error.message)}}))},t.\u0275prov=c.ac({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}()},"9KAI":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("TYT/"),r=n("R4L2"),i=n("Valr");function c(t,e){if(1&t&&(o.kc(0,"nb-option",4),o.Sc(1),o.jc()),2&t){var n=e.$implicit;o.Bc("value",n.theme),o.Pb(1),o.Tc(n.label)}}var a=function(){function t(){this.themeSelected=new o.r}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-theme-select"]],inputs:{selectedTheme:"selectedTheme",themes:"themes"},outputs:{themeSelected:"themeSelected"},decls:4,vars:3,consts:[[1,"theme--select-container"],[1,"theme--select-icon",3,"icon"],[3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(o.kc(0,"div",0),o.fc(1,"nb-icon",1),o.kc(2,"nb-select",2),o.sc("selectedChange",(function(t){return e.themeSelected.emit(t)})),o.Qc(3,c,2,2,"nb-option",3),o.jc(),o.jc()),2&t&&(o.Pb(1),o.Bc("icon","color-palette-outline"),o.Pb(1),o.Bc("selected",e.selectedTheme),o.Pb(1),o.Bc("ngForOf",e.themes))},directives:[r.I,r.bb,i.t,r.U],styles:[".theme--select-container[_ngcontent-%COMP%]{display:flex;align-items:center}.theme--select-icon[_ngcontent-%COMP%]{width:1.5em;height:1.5em;margin-right:.5em}"],changeDetection:0}),t}()},AytR:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o={production:!0,version:"1.2.4",name:"ngx-domoboard",pushServer:"https://nd-api.duckdns.org:5035/api",domoticz:!1}},EjjR:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var o,r=n("15JJ"),i=n("/PH2"),c=n("xMyE"),a=n("t9fZ"),s=n("6I4f"),u=n("UxRr"),d=n("AytR"),l=n("h8nD"),h=n("TYT/"),f=n("cUzu"),g=n("c1wa"),m=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(){return(b=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},p=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}s((o=o.apply(t,e||[])).next())}))},O=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},v=d.a.pushServer,C=function(t){function e(e,n,o,i){var c=t.call(this)||this;return c.httpClient=e,c.dbService=n,c.monitorService=o,c.swPush=i,c.settings$=c.dbService.select("settings"),c.pushSubscription$=c.dbService.select("pushSubscription").pipe(Object(r.a)((function(t){return p(c,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return t?[3,2]:[4,this.swPush.requestSubscription({serverPublicKey:"BG-zibiw-dk6bhrbwLMicGYXna-WwoNqsF8FLKdDUzqhOKvfrH3jYG-UnaYNss45AMDqfJC_GgskDpx8lycjQ0Y"})];case 1:t=e.sent(),e.label=2;case 2:return[2,t]}}))}))}))),c}return m(e,t),Object.defineProperty(e.prototype,"dbSubject",{get:function(){return this.dbService.subject},enumerable:!0,configurable:!0}),e.prototype.getPushSubStore=function(t){return this.dbService.getObjectStore(this.PUSHSUB_STORE,t)},e.prototype.subscribeToNotifications=function(t){var e=this;return this.pushSubscription$.pipe(Object(i.a)(this.settings$),Object(r.a)((function(n){var o=n[0],r=n[1],i={device:t,statusUrl:(r.ssl?"https":"http")+"://"+r.domain+":"+r.port+"/"+l.a.device.replace("{idx}",t.idx),sub:o};return e.httpClient.post(v+"/monitor-device",i).pipe(Object(c.a)((function(n){return p(e,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return"OK"!==n.status?[3,3]:[4,this.syncWithDb("push_subscription",o)];case 1:return e.sent(),[4,this.syncWithDb("monitored_device",t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))})))})))},e.prototype.initSubscriptions=function(){var t=this;return this.settings$.pipe(Object(r.a)((function(e){return t.httpClient.post(v+"/init-monitoring",{api:(e.ssl?"https":"http")+"://"+e.domain+":"+e.port})})))},e.prototype.syncWithDb=function(t,e){return p(this,void 0,void 0,(function(){var n,o;return O(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),n=void 0,"push_subscription"!==t?[3,2]:[4,this.addPushSub(e)];case 1:return n=r.sent(),[3,4];case 2:return"monitored_device"!==t?[3,4]:[4,this.monitorService.addMonitoredDevice(e)];case 3:n=r.sent(),r.label=4;case 4:return console.log("\ud83d\ude03 "+n),[3,6];case 5:return o=r.sent(),console.log("\u26d4\ufe0f "+o),[3,6];case 6:return[2]}}))}))},e.prototype.addPushSub=function(t){var e=this,n=this.getPushSubStore("readwrite").put({id:1,pushSubscription:t.toJSON()});return new Promise((function(o,r){n.onsuccess=(function(e){this.dbSubject.next(b(b({},this.dbSubject.value),{pushSubscription:t})),o("addPushSub: "+e.type)}).bind(e),n.onerror=function(t){r("addPushSub: "+t.target.error.message)}}))},e.prototype.syncPushSub=function(){var t=this,e=this.getPushSubStore("readonly").get(1);e.onsuccess=(function(e){var n=e.target.result;t.dbSubject.next(b(b({},t.dbSubject.value),{pushSubscription:n?n.pushSubscription:null}))}).bind(this),e.onerror=function(t){console.log("syncPushSub: "+t.target.error.message)}},e.prototype.stopSubscription=function(t){var e=this;return this.pushSubscription$.pipe(Object(r.a)((function(n){return e.httpClient.post(v+"/stop-monitoring",{pushSubscription:n,device:t}).pipe(Object(c.a)((function(n){return p(e,void 0,void 0,(function(){var e,o,r;return O(this,(function(i){switch(i.label){case 0:if("OK"!==n.status)return[3,9];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.monitorService.deleteMonitoredDevice(t)];case 2:return o=i.sent(),console.log("\ud83d\ude03 "+o),[3,4];case 3:return e=i.sent(),console.log("\u26d4\ufe0f "+e),[3,4];case 4:return[4,this.dbService.select("monitoredDevices").pipe(Object(a.a)(1)).toPromise()];case 5:if(i.sent().length)return[3,9];i.label=6;case 6:return i.trys.push([6,8,,9]),[4,this.clearPushSubscription()];case 7:return o=i.sent(),console.log("\ud83d\ude03 "+o),[3,9];case 8:return r=i.sent(),console.log("\u26d4\ufe0f "+r),[3,9];case 9:return[2]}}))}))})))})))},e.prototype.clearPushSubscription=function(){var t=this,e=this.getPushSubStore("readwrite").clear();return new Promise((function(n,o){e.onsuccess=(function(t){this.dbSubject.next(b(b({},this.dbSubject.value),{pushSubscription:null})),n("clearPushSubscription: "+t.type)}).bind(t),e.onerror=function(t){o("clearPushSubscription: "+t.target.error.message)}}))},e.\u0275fac=function(t){return new(t||e)(h.oc(f.c),h.oc(s.a),h.oc(u.a),h.oc(g.b))},e.\u0275prov=h.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(s.a)},HW2h:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o,r=n("6I4f"),i=n("TYT/"),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){return(a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=function(t){function e(e){var n=t.call(this)||this;return n.dbService=e,n}return c(e,t),Object.defineProperty(e.prototype,"dbSubject",{get:function(){return this.dbService.subject},enumerable:!0,configurable:!0}),e.prototype.getThemeStore=function(t){return this.dbService.getObjectStore(this.THEME_STORE,t)},e.prototype.saveTheme=function(t){var e=this,n=this.getThemeStore("readwrite").put({id:1,selectedTheme:t});return new Promise((function(o,r){n.onsuccess=(function(e){this.dbSubject.next(a(a({},this.dbSubject.value),{selectedTheme:t})),o("saveTheme: "+e.type)}).bind(e),n.onerror=function(t){r("saveTheme: "+t.target.error.message)}}))},e.prototype.syncTheme=function(){var t=this;this.getThemeStore("readonly").get(1).onsuccess=(function(e){var n=e.target.result;t.dbSubject.next(a(a({},t.dbSubject.value),{selectedTheme:n?n.selectedTheme:"default"}))}).bind(this)},e.\u0275fac=function(t){return new(t||e)(i.oc(r.a))},e.\u0275prov=i.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(r.a)},J7ka:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var o=n("QJY3"),r=n("ad02"),i=n("xMyE"),c=n("VnD/"),a=n("15JJ"),s=n("9Z1F"),u=n("2WpN"),d=n("F/XL"),l=n("dJ3e"),h=n("TYT/"),f=n("3ncI"),g=n("Valr"),m=n("ZBJi");function b(t,e){if(1&t){var n=h.lc();h.kc(0,"nd-settings-content",3),h.sc("clearClick",(function(t){return h.Jc(n),h.vc().onClearClick()})),h.wc(1,"async"),h.wc(2,"async"),h.jc()}if(2&t){var o=h.vc();h.Bc("parent",o.settingsForm)("auth",h.xc(1,4,o.auth$))("settings",h.xc(2,6,o.settings$))("loading",o.loading)}}var p=function(t){return Object.keys(t.value).every((function(e){return!!t.value[e]}))||Object.keys(t.value).every((function(e){return!t.value[e]}))?null:{oneFilledOut:!0}},O=function(){function t(t,e,n,l){var h=this;this.cd=t,this.fb=e,this.service=n,this.dbService=l,this.animationState="out",this.settings$=this.dbService.select("settings"),this.portPattern="([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])",this.settingsForm=this.fb.group({ssl:[null],domain:[null,[o.C.required]],port:[null,[o.C.pattern(this.portPattern),o.C.required]],credentials:this.fb.group({username:[null],password:[null]},{validators:p})}),this.auth$=this.settingsForm.valueChanges.pipe(Object(r.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)})),Object(i.a)((function(t){h.settingsForm.invalid&&h.dbService.syncSettings(t)})),Object(c.a)((function(){return h.settingsForm.valid})),Object(a.a)((function(t){return h.loading=!0,h.service.getAuth(t).pipe(Object(i.a)((function(e){"OK"===e.status&&e.rights>-1?h.dbService.addSettings(t).then((function(t){h.dbService.syncSettings(),console.log(t)})).catch((function(t){h.dbService.syncSettings(),console.log(t)})):(h.dbService.syncSettings(t),h.settingsForm.get("credentials").setErrors({invalid:!0}))})),Object(s.a)((function(e){return h.dbService.syncSettings(t),Object(d.a)({})})),Object(u.a)((function(){return h.loading=!1})))})))}return t.prototype.getControl=function(t){return this.settingsForm.get(t)},t.prototype.show=function(){this.animationState="in",this.showContent=!0,this.settingsForm.enable()},t.prototype.hide=function(){var t=this;this.animationState="out",this.settingsForm.disable(),setTimeout((function(){t.showContent=!1,t.cd.detectChanges()}),400)},t.prototype.onClearClick=function(){return t=this,void 0,n=function(){var t,e=this;return function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(n){switch(n.label){case 0:return[4,this.dbService.clearSettings()];case 1:return t=n.sent(),console.log(t),Object.keys(this.settingsForm.controls).forEach((function(t){"credentials"!==t?e.settingsForm.controls[t].setValue(null):Object.keys(e.settingsForm.controls[t].controls).forEach((function(n){e.settingsForm.controls[t].controls[n].setValue(null)}))})),[2]}}))},new((e=void 0)||(e=Promise))((function(o,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,c)}a((n=n.apply(t,[])).next())}));var t,e,n},t.\u0275fac=function(e){return new(e||t)(h.ec(h.i),h.ec(o.f),h.ec(l.h),h.ec(l.a))},t.\u0275cmp=h.Yb({type:t,selectors:[["nd-settings-sidebar"]],decls:4,vars:5,consts:[[1,"sidebar-container"],[1,"settings-button",3,"animationState","slideIn","slideOut"],["class","sidebar-content",3,"parent","auth","settings","loading","clearClick",4,"ngIf"],[1,"sidebar-content",3,"parent","auth","settings","loading","clearClick"]],template:function(t,e){1&t&&(h.kc(0,"div",0),h.kc(1,"nd-toggle-settings-button",1),h.sc("slideIn",(function(t){return e.show()}))("slideOut",(function(t){return e.hide()})),h.jc(),h.kc(2,"div"),h.Qc(3,b,3,8,"nd-settings-content",2),h.jc(),h.jc()),2&t&&(h.Pb(1),h.Bc("animationState",e.animationState),h.Pb(1),h.Tb("settings-container ",e.animationState,""),h.Pb(1),h.Bc("ngIf",e.showContent))},directives:[f.a,g.u,m.a],pipes:[g.b],styles:["@-webkit-keyframes slidein{0%{max-width:0}to{max-width:100%}}@keyframes slidein{0%{max-width:0}to{max-width:100%}}@-webkit-keyframes slideout{0%{max-width:100%}to{max-width:0}}@keyframes slideout{0%{max-width:100%}to{max-width:0}}@-webkit-keyframes slidedown{0%{max-height:0}to{max-height:calc(100vh - 2.75rem)}}@keyframes slidedown{0%{max-height:0}to{max-height:calc(100vh - 2.75rem)}}@-webkit-keyframes slideup{0%{max-height:calc(100vh - 2.75rem)}to{max-height:0}}@keyframes slideup{0%{max-height:calc(100vh - 2.75rem)}to{max-height:0}}@-webkit-keyframes backgroundin{0%{background:transparent}to{background:rgba(0,0,0,.7)}}@keyframes backgroundin{0%{background:transparent}to{background:rgba(0,0,0,.7)}}@-webkit-keyframes backgroundout{0%{background:rgba(0,0,0,.7)}to{background:transparent}}@keyframes backgroundout{0%{background:rgba(0,0,0,.7)}to{background:transparent}}@-webkit-keyframes enterright{0%{right:-100%}to{right:0}}@keyframes enterright{0%{right:-100%}to{right:0}}@-webkit-keyframes exitright{0%{right:0}to{right:-100%}}@keyframes exitright{0%{right:0}to{right:-100%}}@-webkit-keyframes enterleft{0%{left:-100%}to{left:0}}@keyframes enterleft{0%{left:-100%}to{left:0}}@-webkit-keyframes exitleft{0%{left:0}to{left:-100%}}@keyframes exitleft{0%{left:0}to{left:-100%}}@-webkit-keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes appear{0%{opacity:0}to{opacity:1}}@-webkit-keyframes disappear{0%{opacity:1}to{opacity:0}}@keyframes disappear{0%{opacity:1}to{opacity:0}}.nb-theme-default   [_nghost-%COMP%]   .sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:#f7f9fc}.nb-theme-dark   [_nghost-%COMP%]   .sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:#192038}.nb-theme-cosmic   [_nghost-%COMP%]   .sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:#252547}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:#342f72}.sidebar-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;height:100%;position:fixed;top:0;right:0;z-index:10000;pointer-events:none}.sidebar-container[_ngcontent-%COMP%]   .settings-button[_ngcontent-%COMP%]{width:2.75rem;height:2.75rem;position:relative;top:50%;left:0;pointer-events:auto}.sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{-webkit-animation-duration:.5s;animation-duration:.5s;overflow:hidden;pointer-events:auto}.sidebar-container[_ngcontent-%COMP%]   .settings-container.in[_ngcontent-%COMP%]{-webkit-animation-name:slidein;animation-name:slidein}.sidebar-container[_ngcontent-%COMP%]   .settings-container.out[_ngcontent-%COMP%]{-webkit-animation-name:slideout;animation-name:slideout}.sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{min-width:17.25rem}@media (max-width:768px){.sidebar-container[_ngcontent-%COMP%]{margin:4.75rem 0 0;flex-direction:column-reverse;justify-content:center;width:100%;height:auto}.sidebar-container[_ngcontent-%COMP%]   .settings-button[_ngcontent-%COMP%]{bottom:0;left:calc(50vw - 1.375rem)}.sidebar-container[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{overflow-y:scroll}.sidebar-container[_ngcontent-%COMP%]   .settings-container.in[_ngcontent-%COMP%]{-webkit-animation-name:slidedown;animation-name:slidedown}.sidebar-container[_ngcontent-%COMP%]   .settings-container.out[_ngcontent-%COMP%]{-webkit-animation-name:slideup;animation-name:slideup}}"],changeDetection:0}),t}()},JiCD:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n("TYT/"),r=n("R4L2"),i=n("Valr"),c=n("0g4g");function a(t,e){if(1&t&&o.fc(0,"nd-svg-icon",9),2&t){var n=o.vc();o.Tb("nd-icon ",n.device[n.statusKey],""),o.Bc("name",n.icon[n.device.Image])("status",n.device[n.statusKey])}}function s(t,e){if(1&t&&o.fc(0,"nb-icon",10),2&t){var n=o.vc();o.Bc("icon",n.deviceIcon)}}var u=function(t,e,n){return{off:t,disabled:e,"no-event":n}},d=function(){function t(){this.statusChanged=new o.r,this.optionsClick=new o.r,this.icon={Fireplace:"nd-fireplace",Door:"nd-door"}}return Object.defineProperty(t.prototype,"deviceIcons",{set:function(t){var e=this,n=t.find((function(t){return t.idx===e.device.idx}));this.deviceIcon=n?n.deviceIcon:"alert-triangle-outline"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},set:function(t){t&&(this.clickable=["On","Off","Level"].some((function(e){return t.includes(e)})),this._status=t)},enumerable:!0,configurable:!0}),t.prototype.switchLight=function(){this.statusChanged.emit(this.on?"Off":"On")},t.prototype.onOptionsClick=function(t){t.stopPropagation(),this.optionsClick.emit()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-status-card"]],inputs:{device:"device",type:"type",statusKey:"statusKey",deviceIcons:"deviceIcons",on:"on",loading:"loading",status:"status"},outputs:{statusChanged:"statusChanged",optionsClick:"optionsClick"},decls:12,vars:10,consts:[[3,"ngClass","nbSpinner","click"],[1,"icon-container"],[1,"icon","primary"],[3,"class","name","status",4,"ngIf","ngIfElse"],["nbIcon",""],[1,"details"],[1,"title"],[1,"status"],["icon","plus-outline",1,"option-icon",3,"click"],[3,"name","status"],[1,"temp-icon",3,"icon"]],template:function(t,e){if(1&t&&(o.kc(0,"nb-card",0),o.sc("click",(function(t){return e.switchLight()})),o.kc(1,"div",1),o.kc(2,"div",2),o.Qc(3,a,1,5,"nd-svg-icon",3),o.Qc(4,s,1,1,"ng-template",null,4,o.Rc),o.jc(),o.jc(),o.kc(6,"div",5),o.kc(7,"div",6),o.Sc(8),o.jc(),o.kc(9,"div",7),o.Sc(10),o.jc(),o.jc(),o.kc(11,"nb-icon",8),o.sc("click",(function(t){return e.onOptionsClick(t)})),o.jc(),o.jc()),2&t){var n=o.Hc(5);o.Bc("ngClass",o.Fc(6,u,!e.on,e.device.HaveTimeout,!e.clickable))("nbSpinner",e.loading),o.Pb(3),o.Bc("ngIf",!!e.icon[e.device.Image]||"Door Contact"===e.type&&"alert-triangle-outline"===e.deviceIcon)("ngIfElse",n),o.Pb(5),o.Tc(e.device.Name),o.Pb(2),o.Tc(e.status)}},directives:[r.h,i.r,r.jb,i.u,r.I,c.a],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{box-shadow:0 0 0 0 #342f6e,0 .5rem 1rem 0 rgba(44,51,73,.1)}.nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-radius:.25rem 0 0 .25rem;color:#fff}.nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#598bff,#36f);box-shadow:0 0 0 0 #274bdb,0 0 0 0 #1a34b8,0 0 transparent}.nb-theme-default   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#222b45}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .5rem 0 .75rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .75rem 0 .5rem}.nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-weight:600;color:#36f}.nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:400;color:#222b45}.nb-theme-default   [_nghost-%COMP%]   .nd-icon[_ngcontent-%COMP%]{width:100%;height:100%}.nb-theme-default   [_nghost-%COMP%]   .nd-icon.Off[_ngcontent-%COMP%]{fill:#222b45;stroke:#222b45}.nb-theme-default   [_nghost-%COMP%]   .nd-icon.Closed[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   .nd-icon.Open[_ngcontent-%COMP%]{fill:#222b45;stroke:#222b45;pointer-events:none}.nb-theme-default   [_nghost-%COMP%]   .nd-icon.On[_ngcontent-%COMP%]{fill:#fff;stroke:#fff}@media (min-width:992px){.nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover{background:#fff}.nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover   .icon.primary[_ngcontent-%COMP%]{background-image:btn-hero-primary-light-gradient()}}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{box-shadow:0 0 0 0 #342f6e,0 .5rem 1rem 0 #1a1f33}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-radius:.25rem 0 0 .25rem;color:#fff}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#598bff,#36f);box-shadow:0 0 0 0 #274bdb,0 0 0 0 #1a34b8,0 0 transparent}.nb-theme-dark   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .5rem 0 .75rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .75rem 0 .5rem}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-weight:600;color:#36f}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:400;color:#fff}.nb-theme-dark   [_nghost-%COMP%]   .nd-icon[_ngcontent-%COMP%]{width:100%;height:100%}.nb-theme-dark   [_nghost-%COMP%]   .nd-icon.Off[_ngcontent-%COMP%]{fill:#fff;stroke:#fff}.nb-theme-dark   [_nghost-%COMP%]   .nd-icon.Closed[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   .nd-icon.Open[_ngcontent-%COMP%]{fill:#fff;stroke:#fff;pointer-events:none}.nb-theme-dark   [_nghost-%COMP%]   .nd-icon.On[_ngcontent-%COMP%]{fill:#fff;stroke:#fff}@media (min-width:992px){.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover{background:#2a3656}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover   .icon.primary[_ngcontent-%COMP%]{background-image:btn-hero-primary-light-gradient()}}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{box-shadow:0 0 0 0 #342f6e,0 .5rem 1rem 0 #1a1f33}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-radius:.25rem 0 0 .25rem;color:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#b18aff,#a16eff);box-shadow:0 0 0 0 #7b51db,0 0 0 0 #5a37b8,0 0 transparent}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .5rem 0 .75rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .75rem 0 .5rem}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-weight:600;color:#a16eff}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:400;color:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   .nd-icon[_ngcontent-%COMP%]{width:100%;height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   .nd-icon.Off[_ngcontent-%COMP%]{fill:#fff;stroke:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   .nd-icon.Closed[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   .nd-icon.Open[_ngcontent-%COMP%]{fill:#fff;stroke:#fff;pointer-events:none}.nb-theme-cosmic   [_nghost-%COMP%]   .nd-icon.On[_ngcontent-%COMP%]{fill:#fff;stroke:#fff}@media (min-width:992px){.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover{background:#3b3b69}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover   .icon.primary[_ngcontent-%COMP%]{background-image:btn-hero-primary-light-gradient()}}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{box-shadow:0 3px 0 0 #342f6e,0 8px 20px 0 rgba(40,37,89,.6)}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border-radius:.5rem 0 0 .5rem;color:#fff}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#ad59ff,#7659ff);box-shadow:0 3px 0 0 #7e4ddb,0 2px 8px 0 #9259ff,0 4px 10px 0 rgba(33,7,77,.5)}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%], .nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card.off[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#a1a1e5}[dir=ltr]   .nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .5rem 0 .75rem}[dir=rtl]   .nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding:0 .75rem 0 .5rem}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-weight:500;color:#fff}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-weight:300;color:#a1a1e5}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .nd-icon[_ngcontent-%COMP%]{width:100%;height:100%}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .nd-icon.Off[_ngcontent-%COMP%]{fill:#a1a1e5;stroke:#a1a1e5}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .nd-icon.Closed[_ngcontent-%COMP%], .nb-theme-custom-cosmic   [_nghost-%COMP%]   .nd-icon.Open[_ngcontent-%COMP%]{fill:#a1a1e5;stroke:#a1a1e5;pointer-events:none}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .nd-icon.On[_ngcontent-%COMP%]{fill:#fff;stroke:#fff}@media (min-width:992px){.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover{background:#463f92}.nb-theme-custom-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]:hover   .icon.primary[_ngcontent-%COMP%]{background-image:btn-hero-primary-light-gradient()}}nb-card[_ngcontent-%COMP%]{flex-direction:row;align-items:center;height:6rem;overflow:visible}nb-card.disabled[_ngcontent-%COMP%]{opacity:.3}nb-card.disabled[_ngcontent-%COMP%], nb-card.no-event[_ngcontent-%COMP%]{pointer-events:none}nb-card[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{height:100%;padding:0;border-right:1px solid #342e73}nb-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:7rem;height:100%;font-size:3.75rem}nb-card.off[_ngcontent-%COMP%]   .icon.primary[_ngcontent-%COMP%]{box-shadow:none!important;background-image:linear-gradient(90deg,transparent,transparent)!important}nb-card.off[_ngcontent-%COMP%]   .icon.secondary[_ngcontent-%COMP%]{background:transparent}nb-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%;width:55%;border-left:1px solid transparent}nb-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.25rem}nb-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:1rem;text-transform:uppercase}nb-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{margin:.5rem .5rem auto auto;width:2rem;height:2rem;cursor:pointer;pointer-events:auto}.temp-icon[_ngcontent-%COMP%]{width:60%;height:60%}"],changeDetection:0}),t}()},"Nj+8":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o,r=n("6I4f"),i=n("TYT/"),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){return(a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o},u=function(t){function e(e){var n=t.call(this)||this;return n.dbService=e,n}return c(e,t),Object.defineProperty(e.prototype,"dbSubject",{get:function(){return this.dbService.subject},enumerable:!0,configurable:!0}),e.prototype.getIconStore=function(t){return this.dbService.getObjectStore(this.ICON_STORE,t)},e.prototype.addDeviceIcon=function(t,e){var n=this,o=this.getIconStore("readwrite").put({idx:t,deviceIcon:e});return new Promise((function(r,i){o.onsuccess=(function(n){this.dbSubject.next(a(a({},this.dbSubject.value),{deviceIcons:s(this.dbSubject.value.deviceIcons,[{idx:t,deviceIcon:e}])})),r("addDeviceIcon: "+n.type)}).bind(n),o.onerror=function(t){i("addDeviceIcon: "+t.target.error.message)}}))},e.prototype.syncDeviceIcons=function(){var t=this;this.getIconStore("readonly").getAll().onsuccess=(function(e){var n=e.target.result;t.dbSubject.next(a(a({},t.dbSubject.value),{deviceIcons:n||[]}))}).bind(this)},e.prototype.deleteDeviceIcon=function(t){var e=this.getIconStore("readwrite").delete(t);return new Promise((function(t,n){e.onsuccess=function(e){t("deleteDeviceIcon: "+e.type)},e.onerror=function(t){n("deleteDeviceIcon: "+t.target.error.message)}}))},e.\u0275fac=function(t){return new(t||e)(i.oc(r.a))},e.\u0275prov=i.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(r.a)},PCNd:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("Valr"),r=n("QJY3"),i=n("R4L2"),c=n("dcf7"),a=n("TYT/"),s=(n("aZ8m"),n("J7ka"),n("3ncI"),n("ZBJi"),n("JiCD"),n("0g4g"),n("PNQ/"),n("9KAI"),function(){function t(){}return t.\u0275mod=a.cc({type:t}),t.\u0275inj=a.bc({factory:function(e){return new(e||t)},imports:[[o.c,i.pb,i.l,r.y,i.M,i.q,i.kb,i.T.forRoot(),c.a,i.K,i.e,i.db],o.c,i.l,i.kb,i.K,i.e,i.pb,i.db]}),t}())},"PNQ/":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("TYT/"),r=n("K9Ia"),i=n("bne5"),c=n("xMyE"),a=n("VnD/"),s=n("ny24"),u=n("R4L2"),d=n("9KAI"),l=function(){function t(){this.unsubscribe$=new r.a,this.outsideClick=new o.r,this.themeSelected=new o.r,this.items=[{title:"Switches",link:"/devices/switches",icon:"toggle-left-outline"},{title:"Temperature",link:"/devices/temperature",icon:"thermometer-outline"}]}return t.prototype.ngOnInit=function(){var t=this;Object(i.a)(document,"click").pipe(Object(c.a)((function(t){t.preventDefault(),t.stopPropagation()})),Object(a.a)((function(e){return"in"===t.animationState&&"menu"!==e.target.id&&"menu-icon"!==e.target.id&&"button"!==e.target.type})),Object(c.a)((function(){return t.outsideClick.emit()})),Object(s.a)(this.unsubscribe$)).subscribe()},t.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-menu-sidebar"]],inputs:{animationState:"animationState",selectedTheme:"selectedTheme",themes:"themes"},outputs:{outsideClick:"outsideClick",themeSelected:"themeSelected"},decls:4,vars:9,consts:[["id","menu-sidebar"],["id","menu","tag","menu",3,"items"],[1,"menu--theme-container",3,"selectedTheme","themes","themeSelected"]],template:function(t,e){1&t&&(o.kc(0,"div",0),o.kc(1,"div"),o.fc(2,"nb-menu",1),o.kc(3,"nd-theme-select",2),o.sc("themeSelected",(function(t){return e.themeSelected.emit(t)})),o.jc(),o.jc(),o.jc()),2&t&&(o.Sb(e.animationState),o.Pb(1),o.Tb("menu-container ",e.animationState,""),o.Pb(1),o.Bc("items",e.items),o.Pb(1),o.Bc("selectedTheme",e.selectedTheme)("themes",e.themes))},directives:[u.S,d.a],styles:["@-webkit-keyframes slidein{0%{max-width:0}to{max-width:100%}}@keyframes slidein{0%{max-width:0}to{max-width:100%}}@-webkit-keyframes slideout{0%{max-width:100%}to{max-width:0}}@keyframes slideout{0%{max-width:100%}to{max-width:0}}@-webkit-keyframes slidedown{0%{max-height:0}to{max-height:calc(100vh - 2.75rem)}}@keyframes slidedown{0%{max-height:0}to{max-height:calc(100vh - 2.75rem)}}@-webkit-keyframes slideup{0%{max-height:calc(100vh - 2.75rem)}to{max-height:0}}@keyframes slideup{0%{max-height:calc(100vh - 2.75rem)}to{max-height:0}}@-webkit-keyframes backgroundin{0%{background:transparent}to{background:rgba(0,0,0,.7)}}@keyframes backgroundin{0%{background:transparent}to{background:rgba(0,0,0,.7)}}@-webkit-keyframes backgroundout{0%{background:rgba(0,0,0,.7)}to{background:transparent}}@keyframes backgroundout{0%{background:rgba(0,0,0,.7)}to{background:transparent}}@-webkit-keyframes enterright{0%{right:-100%}to{right:0}}@keyframes enterright{0%{right:-100%}to{right:0}}@-webkit-keyframes exitright{0%{right:0}to{right:-100%}}@keyframes exitright{0%{right:0}to{right:-100%}}@-webkit-keyframes enterleft{0%{left:-100%}to{left:0}}@keyframes enterleft{0%{left:-100%}to{left:0}}@-webkit-keyframes exitleft{0%{left:0}to{left:-100%}}@keyframes exitleft{0%{left:0}to{left:-100%}}@-webkit-keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes appear{0%{opacity:0}to{opacity:1}}@-webkit-keyframes disappear{0%{opacity:1}to{opacity:0}}@keyframes disappear{0%{opacity:1}to{opacity:0}}.nb-theme-default   [_nghost-%COMP%]   #menu-sidebar[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{background:#f7f9fc}.nb-theme-default   [_nghost-%COMP%]   .menu--theme-container[_ngcontent-%COMP%]{color:#222b45}.nb-theme-dark   [_nghost-%COMP%]   #menu-sidebar[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{background:#192038}.nb-theme-dark   [_nghost-%COMP%]   .menu--theme-container[_ngcontent-%COMP%]{color:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   #menu-sidebar[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{background:#252547}.nb-theme-cosmic   [_nghost-%COMP%]   .menu--theme-container[_ngcontent-%COMP%]{color:#fff}.nb-theme-custom-cosmic   [_nghost-%COMP%]   #menu-sidebar[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{background:#342f72}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .menu--theme-container[_ngcontent-%COMP%]{color:#a1a1e5}#menu-sidebar[_ngcontent-%COMP%]{background:rgba(0,0,0,.7);position:fixed;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-animation-duration:.5s;animation-duration:.5s;overflow:hidden}#menu-sidebar.in[_ngcontent-%COMP%]{-webkit-animation-name:backgroundin;animation-name:backgroundin}#menu-sidebar.out[_ngcontent-%COMP%]{-webkit-animation-name:backgroundout;animation-name:backgroundout}#menu-sidebar[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:fixed;top:0;-webkit-animation-duration:.5s;animation-duration:.5s;overflow:hidden;min-width:17rem}#menu-sidebar[_ngcontent-%COMP%]   .menu-container.in[_ngcontent-%COMP%]{-webkit-animation-name:enterleft;animation-name:enterleft}#menu-sidebar[_ngcontent-%COMP%]   .menu-container.out[_ngcontent-%COMP%]{-webkit-animation-name:exitleft;animation-name:exitleft}#menu-sidebar[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]   #menu[_ngcontent-%COMP%]{margin:5rem 0 0}.menu--theme-container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:flex-end;margin-bottom:1rem}@media (min-width:768px){#menu-sidebar[_ngcontent-%COMP%]{display:none}}"]}),t}()},UxRr:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o,r=n("6I4f"),i=n("TYT/"),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){return(a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o},u=function(t){function e(e){var n=t.call(this)||this;return n.dbService=e,n}return c(e,t),Object.defineProperty(e.prototype,"dbSubject",{get:function(){return this.dbService.subject},enumerable:!0,configurable:!0}),e.prototype.getMonitorStore=function(t){return this.dbService.getObjectStore(this.MONITOR_STORE,t)},e.prototype.addMonitoredDevice=function(t){var e=this,n=this.getMonitorStore("readwrite").put({idx:t.idx,monitoredDevice:t});return new Promise((function(o,r){n.onsuccess=(function(e){this.dbSubject.next(a(a({},this.dbSubject.value),{monitoredDevices:s(this.dbSubject.value.monitoredDevices,[{idx:t.idx,monitoredDevice:t}])})),o("addMonitoredDevice: "+e.type)}).bind(e),n.onerror=function(t){r("addMonitoredDevice: "+t.target.error.message)}}))},e.prototype.syncMonitoredDevices=function(){var t=this;this.getMonitorStore("readonly").getAll().onsuccess=(function(e){var n=e.target.result;t.dbSubject.next(a(a({},t.dbSubject.value),{monitoredDevices:n||[]}))}).bind(this)},e.prototype.deleteMonitoredDevice=function(t){var e=this,n=this.getMonitorStore("readwrite").delete(t.idx);return new Promise((function(o,r){n.onsuccess=(function(e){var n=s(this.dbSubject.value.monitoredDevices),r=n.indexOf(t);n.splice(r,1),this.dbSubject.next(a(a({},this.dbSubject.value),{monitoredDevices:n})),o("deleteMonitoredDevice: "+e.type)}).bind(e),n.onerror=function(t){r("deleteMonitoredDevice: "+t.target.error.message)}}))},e.\u0275fac=function(t){return new(t||e)(i.oc(r.a))},e.\u0275prov=i.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(r.a)},"Y4+Y":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n("26FU"),r=n("TYT/"),i=function(){function t(t){this.zone=t,this.subject=new o.a(null),this.notification=this.subject.asObservable()}return t.prototype.notify=function(t,e){var n=this;this.zone.run((function(){n.subject.next(t),e&&setTimeout((function(){return n.clearNotification()}),e)}))},t.prototype.clearNotification=function(){this.subject.next(null)},t.\u0275fac=function(e){return new(e||t)(r.oc(r.H))},t.\u0275prov=r.ac({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},ZBJi:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var o=n("TYT/"),r=n("QJY3"),i=n("R4L2"),c=n("Valr");function a(t,e){1&t&&(o.kc(0,"div",13),o.Sc(1," Domain is required "),o.jc())}function s(t,e){1&t&&(o.kc(0,"div",13),o.Sc(1," Not a valid port number "),o.jc())}function u(t,e){1&t&&(o.kc(0,"span"),o.Sc(1,"no connection"),o.jc())}function d(t,e){1&t&&(o.kc(0,"span"),o.Sc(1,"need authentication"),o.jc())}function l(t,e){if(1&t&&(o.ic(0),o.kc(1,"span"),o.Sc(2),o.jc(),o.kc(3,"span"),o.Sc(4),o.jc(),o.hc()),2&t){var n=o.vc();o.Pb(2),o.Uc("Domoticz version: ",n.auth.version,""),o.Pb(2),o.Uc("Status: ",n.auth.status,"")}}var h=function(t,e){return{"input-danger":t,"input-success":e}},f=function(){function t(){this.clearClick=new o.r}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.credentials=t.get("credentials"),this._parent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"auth",{get:function(){return this._auth},set:function(t){t&&(this.connected="OK"===t.status&&t.rights>-1,this._auth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"settings",{get:function(){return this._settings},set:function(t){t?(this.getControl("ssl")?this.getControl("ssl").setValue(t.ssl,{emitEvent:!1}):this.parent.addControl("ssl",new r.g(t.ssl)),this.getControl("domain").setValue(t.domain,{emitEvent:!1}),this.getControl("port").setValue(t.port,{emitEvent:!1}),Object.keys(t.credentials).every((function(e){return null!==t.credentials[e]}))&&(this.parent.get("credentials").get("username").setValue(t.credentials.username,{emitEvent:!1}),this.parent.get("credentials").get("password").setValue(t.credentials.password,{emitEvent:!1})),this.parent.updateValueAndValidity()):this.getControl("ssl")||this.parent.addControl("ssl",new r.g(null)),this._settings=t},enumerable:!0,configurable:!0}),t.prototype.getControl=function(t){return this.parent.get(t)},t.prototype.getInvalid=function(t){return this.getControl(t).invalid&&!!this.getControl(t).value},t.prototype.onClearClick=function(){this.clearClick.emit()},t.prototype.ngOnDestroy=function(){this.parent.removeControl("ssl")},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-settings-content"]],inputs:{parent:"parent",auth:"auth",settings:"settings",loading:"loading"},outputs:{clearClick:"clearClick"},decls:25,vars:28,consts:[[1,"content-container",3,"nbSpinner"],[1,"form-container",3,"formGroup"],["type","reset","nbButton","","outline","","status","primary",1,"clear-btn",3,"click"],[1,"form-group"],["formControlName","ssl",3,"status"],["nbInput","","formControlName","domain","type","text","placeholder","domain / ip",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["nbInput","","formControlName","port","type","text","placeholder","port",1,"form-control",3,"ngClass"],[1,"optional"],[3,"formGroup"],["nbInput","","formControlName","username","type","text","placeholder","username",1,"form-control",3,"ngClass"],["nbInput","","formControlName","password","type","password","placeholder","password",1,"form-control",3,"ngClass"],[4,"ngIf"],[1,"error-message"]],template:function(t,e){1&t&&(o.kc(0,"div",0),o.kc(1,"div",1),o.kc(2,"button",2),o.sc("click",(function(t){return e.onClearClick()})),o.Sc(3," clear settings "),o.jc(),o.kc(4,"div",3),o.kc(5,"nb-checkbox",4),o.Sc(6," SSL (mandatory for service worker support) "),o.jc(),o.jc(),o.kc(7,"div",3),o.fc(8,"input",5),o.Qc(9,a,2,0,"div",6),o.jc(),o.kc(10,"div",3),o.fc(11,"input",7),o.Qc(12,s,2,0,"div",6),o.jc(),o.kc(13,"div",3),o.kc(14,"span",8),o.Sc(15,"Optional:"),o.jc(),o.jc(),o.ic(16,9),o.kc(17,"div",3),o.fc(18,"input",10),o.jc(),o.kc(19,"div",3),o.fc(20,"input",11),o.jc(),o.hc(),o.jc(),o.kc(21,"div"),o.Qc(22,u,2,0,"span",12),o.Qc(23,d,2,0,"span",12),o.Qc(24,l,5,2,"ng-container",12),o.jc(),o.jc()),2&t&&(o.Bc("nbSpinner",e.loading),o.Pb(1),o.Bc("formGroup",e.parent),o.Pb(4),o.Cc("status",e.connected?"success":"warning"),o.Pb(3),o.Bc("ngClass",o.Ec(16,h,e.getInvalid("domain"),e.connected&&!e.getInvalid("domain"))),o.Pb(1),o.Bc("ngIf",e.getInvalid("domain")),o.Pb(2),o.Bc("ngClass",o.Ec(19,h,e.getInvalid("port"),e.connected&&!e.getInvalid("port"))),o.Pb(1),o.Bc("ngIf",e.getInvalid("port")),o.Pb(4),o.Bc("formGroup",e.credentials),o.Pb(2),o.Bc("ngClass",o.Ec(22,h,e.parent.get("credentials").invalid,e.connected&&!e.getInvalid("credentials"))),o.Pb(2),o.Bc("ngClass",o.Ec(25,h,e.parent.get("credentials").invalid,e.connected&&!e.getInvalid("credentials"))),o.Pb(1),o.Tb("connection-state ",e.connected?"success":"danger",""),o.Pb(1),o.Bc("ngIf","OK"!==(null==e.auth?null:e.auth.status)),o.Pb(1),o.Bc("ngIf",-1===(null==e.auth?null:e.auth.rights)),o.Pb(1),o.Bc("ngIf",e.connected))},directives:[i.jb,r.p,r.i,i.d,i.p,r.o,r.h,i.L,r.d,c.r,c.u],styles:[".nb-theme-default   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{color:#fff;background-color:#f7f9fc}.nb-theme-default   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-default   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-default   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff3d71}.nb-theme-default   [_nghost-%COMP%]   .optional[_ngcontent-%COMP%]{margin:0 0 .5rem .5rem;color:#fff}.nb-theme-default   [_nghost-%COMP%]   .connection-state[_ngcontent-%COMP%]{width:80%;height:5rem;margin-top:auto;margin-bottom:2rem;display:flex;flex-direction:column;background-color:#edf1f7;border:solid;border-radius:.25rem;padding:.1875rem 1.125rem;color:#222b45}.nb-theme-default   [_nghost-%COMP%]   .connection-state.success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-default   [_nghost-%COMP%]   .connection-state.danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-dark   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{color:#fff;background-color:#192038}.nb-theme-dark   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-dark   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-dark   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff3d71}.nb-theme-dark   [_nghost-%COMP%]   .optional[_ngcontent-%COMP%]{margin:0 0 .5rem .5rem;color:#fff}.nb-theme-dark   [_nghost-%COMP%]   .connection-state[_ngcontent-%COMP%]{width:80%;height:5rem;margin-top:auto;margin-bottom:2rem;display:flex;flex-direction:column;background-color:#151a30;border:solid;border-radius:.25rem;padding:.1875rem 1.125rem;color:#fff}.nb-theme-dark   [_nghost-%COMP%]   .connection-state.success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-dark   [_nghost-%COMP%]   .connection-state.danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{color:#fff;background-color:#252547}.nb-theme-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff3d71}.nb-theme-cosmic   [_nghost-%COMP%]   .optional[_ngcontent-%COMP%]{margin:0 0 .5rem .5rem;color:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   .connection-state[_ngcontent-%COMP%]{width:80%;height:5rem;margin-top:auto;margin-bottom:2rem;display:flex;flex-direction:column;background-color:#1b1b38;border:solid;border-radius:.25rem;padding:.1875rem 1.125rem;color:#fff}.nb-theme-cosmic   [_nghost-%COMP%]   .connection-state.success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-cosmic   [_nghost-%COMP%]   .connection-state.danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{color:#fff;background-color:#342f72}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-danger[_ngcontent-%COMP%]{border-color:#ff3d71}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff3d71}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .optional[_ngcontent-%COMP%]{margin:0 0 .5rem .5rem;color:#fff}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .connection-state[_ngcontent-%COMP%]{width:80%;height:5rem;margin-top:auto;margin-bottom:2rem;display:flex;flex-direction:column;background-color:#2f296b;border:solid;border-radius:.5rem;padding:.1875rem 1.125rem;color:#a1a1e5}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .connection-state.success[_ngcontent-%COMP%]{border-color:#00d68f}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .connection-state.danger[_ngcontent-%COMP%]{border-color:#ff3d71}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}.content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{margin:15vh 20px}.content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{display:flex;margin:0 0 2vh auto}@media (max-width:768px){.content-container[_ngcontent-%COMP%]{height:calc(100vh - 7.5rem)}.content-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{margin:3vh 20px 6vh}}"],changeDetection:0}),t}()},aZ8m:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n("TYT/"),r=n("AytR"),i=n("DUip"),c=n("R4L2"),a=n("Valr"),s=n("9KAI");function u(t,e){1&t&&o.fc(0,"nb-tab",8),2&t&&o.Cc("tabTitle",e.$implicit.key)}var d=function(){function t(t,e){this.router=t,this.cd=e,this.position="normal",this.menuToggle=new o.r,this.themeSelected=new o.r,this.name=r.a.name,this.routes={Switches:"devices/switches",Temperature:"devices/temperature"}}return t.prototype.onChangeTab=function(t){this.router.navigate([this.routes[t.tabTitle]])},t.\u0275fac=function(e){return new(e||t)(o.ec(i.d),o.ec(o.i))},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-header"]],inputs:{position:"position",themes:"themes",selectedTheme:"selectedTheme"},outputs:{menuToggle:"menuToggle",themeSelected:"themeSelected"},decls:11,vars:6,consts:[[1,"header-container"],[1,"logo-containter"],[1,"navigation",3,"click"],["id","menu-icon",1,"nb-menu"],[1,"logo"],["id","header-tabset",3,"changeTab"],[3,"tabTitle",4,"ngFor","ngForOf"],[1,"header--theme-container",3,"selectedTheme","themes","themeSelected"],[3,"tabTitle"]],template:function(t,e){1&t&&(o.kc(0,"div",0),o.kc(1,"div",1),o.kc(2,"a",2),o.sc("click",(function(t){return e.menuToggle.emit()})),o.fc(3,"i",3),o.jc(),o.kc(4,"div",4),o.kc(5,"span"),o.Sc(6),o.jc(),o.jc(),o.jc(),o.kc(7,"nb-tabset",5),o.sc("changeTab",(function(t){return e.onChangeTab(t)})),o.Qc(8,u,1,1,"nb-tab",6),o.wc(9,"keyvalue"),o.jc(),o.kc(10,"nd-theme-select",7),o.sc("themeSelected",(function(t){return e.themeSelected.emit(t)})),o.jc(),o.jc()),2&t&&(o.Pb(6),o.Tc(e.name),o.Pb(2),o.Bc("ngForOf",o.xc(9,4,e.routes)),o.Pb(2),o.Bc("selectedTheme",e.selectedTheme)("themes",e.themes))},directives:[c.ob,a.t,s.a,c.mb],pipes:[a.m],styles:[".nb-theme-default   [_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#36f;font-weight:400;border-color:#edf1f7}.nb-theme-dark   [_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#36f;font-weight:400;border-color:#151a30}.nb-theme-cosmic   [_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#a16eff;font-weight:400;border-color:#1b1b38}.nb-theme-custom-cosmic   [_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;font-weight:300;border-color:#2f296b}.header-container[_ngcontent-%COMP%]{display:flex}.header-container[_ngcontent-%COMP%]   #header-tabset[_ngcontent-%COMP%]{padding:0 1.25rem}.header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]{display:flex;align-items:center}.header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;height:4.75rem;padding:0 1.25rem;font-size:1.75rem;white-space:nowrap;border-right:1px solid}@media (max-width:768px){.header-container[_ngcontent-%COMP%]   #header-tabset[_ngcontent-%COMP%]{display:none}.header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]{width:100%;font-size:2.5rem}.header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100%;border-right:none;justify-content:center}.header--theme-container[_ngcontent-%COMP%]{display:none}}@media (min-width:768px){.header-container[_ngcontent-%COMP%]   .logo-containter[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]{display:none}.header--theme-container[_ngcontent-%COMP%]{align-self:center;margin-left:auto;margin-right:2em}}"],changeDetection:0}),t}()},crnd:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},dJ3e:function(t,e,n){"use strict";n("sKXY");var o,r=n("h8nD"),i=n("6I4f"),c=n("cUzu"),a=n("26FU"),s=n("F/XL"),u=n("ad02"),d=n("15JJ"),l=n("xMyE"),h=n("TYT/"),f=function(){function t(t,e){this.httpClient=t,this.dbService=e,this.loadingSubject=new a.a(!1),this.loading$=this.loadingSubject.asObservable().pipe(Object(u.a)()),this.settings$=this.dbService.select("settings")}return t.prototype.get=function(t,e){var n=this;return this.settings$.pipe(Object(d.a)((function(o){return o?(e&&n.loadingSubject.next(!0),n.httpClient.get((o.ssl?"https":"http")+"://"+o.domain+":"+o.port+"/"+t,o.credentials?n.getAuthOption(o):{}).pipe(Object(l.a)((function(){return n.loadingSubject.next(!1)})))):Object(s.a)(null)})))},t.prototype.post=function(t,e){var n=this;return this.settings$.pipe(Object(d.a)((function(o){return o?n.httpClient.post((o.ssl?"https":"http")+"://"+o.domain+":"+o.port+"/"+t,e):Object(s.a)(null)})))},t.prototype.getAuthOption=function(t){var e=btoa(t.credentials.username+":"+t.credentials.password);return{headers:new c.f({Authorization:"Basic: "+e})}},t.\u0275fac=function(e){return new(e||t)(h.oc(c.c),h.oc(i.a))},t.\u0275prov=h.ac({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),g=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(e,n){return t.call(this,e,n)||this}return g(e,t),e.prototype.switchLight=function(t,e){return this.get(r.a.switchLight.replace("{idx}",t).replace("{switchcmd}",e))},e.\u0275fac=function(t){return new(t||e)(h.oc(c.c),h.oc(i.a))},e.\u0275prov=h.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(f),b=(n("qXXK"),n("Y4+Y")),p=function(){function t(t){this.httpClient=new c.c(t)}return t.prototype.getAuth=function(t){var e=new c.g("GET",(t.ssl?"https":"http")+"://"+t.domain+":"+t.port+"/"+r.a.auth);try{if(Object.keys(t.credentials).every((function(e){return null!==t.credentials[e]}))){var n=btoa(t.credentials.username+":"+t.credentials.password);e=e.clone({headers:e.headers.set("Authorization","Basic "+n)})}}catch(o){}return this.httpClient.request(e.method,e.url,{headers:e.headers})},t.\u0275fac=function(e){return new(e||t)(h.oc(c.b))},t.\u0275prov=h.ac({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),O=n("xXU7"),v=n("FYXD"),C=n("VnD/"),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(){return(_=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},y=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o},M=function(t){return void 0!==t.SwitchType},k=function(t){return void 0!==t.Temp||void 0!==t.Humidity},w=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.initialState={types:[],devices:[],lastUpdate:""},o.subject=new a.a(o.initialState),o.store=o.subject.asObservable().pipe(Object(u.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)}))),o}return P(e,t),e.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.store.pipe(Object(u.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)})),v.a.apply(void 0,t))},e.prototype.getDevices=function(t){var e=this;return this.get(r.a.devices.replace("{filter}",t),!0).pipe(Object(l.a)((function(t){return t&&t.result?e.subject.next(_(_({},e.subject.value),{devices:t.result,lastUpdate:t.ActTime.toString(),types:y(t.result.map((function(t){return M(t)?t.SwitchType:k(t)?t.Type:void 0})).filter((function(t,e,n){return n.indexOf(t)===e})))})):e.clearStore()})))},e.prototype.refreshDevices=function(t){var e=this;return Object(O.a)(1e4).pipe(Object(d.a)((function(){return e.get(r.a.refreshDevices.replace("{lastupdate}",e.subject.value.lastUpdate).replace("{filter}",t))})),Object(C.a)((function(t){return!!t&&!!t.result})),Object(l.a)((function(t){return e.subject.next(_(_({},e.subject.value),{devices:e.subject.value.devices.map((function(e){return t.result.find((function(t){if(M(e)||k(e))return e.idx===t.idx}))||e})),lastUpdate:t.ActTime.toString()}))})))},e.prototype.clearStore=function(){this.subject.next(this.initialState)},e.\u0275fac=function(t){return new(t||e)(h.oc(c.c),h.oc(i.a))},e.\u0275prov=h.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(f),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(){return(x=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},j=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.initialState={device:{}},o.subject=new a.a(o.initialState),o.store=o.subject.asObservable().pipe(Object(u.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)}))),o}return S(e,t),e.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.store.pipe(v.a.apply(void 0,t))},e.prototype.getDevice=function(t){var e=this;return this.get(r.a.device.replace("{idx}",t)).pipe(Object(l.a)((function(t){return t?e.subject.next(x(x({},e.subject.value),{device:t.result[0]})):e.clearStore()})))},e.prototype.renameDevice=function(t,e){return this.get(r.a.renameDevice.replace("{idx}",t).replace("{name}",e))},e.prototype.setDimLevel=function(t,e){return this.get(r.a.dimLevel.replace("{idx}",t).replace("{level}",e.toString()))},e.prototype.setColorBrightness=function(t,e){return this.get(r.a.colorBrightness.replace("{idx}",t).replace("{color}",JSON.stringify(e)))},e.prototype.setKelvinLevel=function(t,e){return this.get(r.a.kelvinLevel.replace("{idx}",t).replace("{kelvin}",e))},e.prototype.syncColor=function(t){this.subject.next(x(x({},this.subject.value),{device:x(x({},this.subject.value.device),{Color:JSON.stringify(t)})}))},e.prototype.clearStore=function(){this.subject.next(this.initialState)},e.\u0275fac=function(t){return new(t||e)(h.oc(c.c),h.oc(i.a))},e.\u0275prov=h.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(f),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(){return(I=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},D=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.initialState={tempGraph:{day:[],month:[],year:[]},switchLogs:[]},o.subject=new a.a(o.initialState),o.store=o.subject.asObservable().pipe(Object(u.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)}))),o}return T(e,t),e.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.store.pipe(v.a.apply(void 0,t))},e.prototype.getTempGraph=function(t,e){var n=this;return this.get(r.a.tempGraph.replace("{idx}",t).replace("{range}",e)).pipe(Object(l.a)((function(t){var o;"OK"===t.status&&n.subject.next(I(I({},n.subject.value),{tempGraph:I(I({},n.subject.value.tempGraph),(o={},o[e]=t.result,o))}))})))},e.prototype.getSwitchLogs=function(t){var e=this;return this.get(r.a.lightLog.replace("{idx}",t)).pipe(Object(l.a)((function(t){"OK"===t.status&&e.subject.next(I(I({},e.subject.value),{switchLogs:t.result}))})))},e.prototype.clearSwitchLogs=function(t){var e=this;return this.get(r.a.clearLog.replace("{idx}",t)).pipe(Object(l.a)((function(t){"OK"===t.status&&e.subject.next(I(I({},e.subject.value),{switchLogs:[]}))})))},e.prototype.clearStore=function(){this.subject.next(this.initialState)},e.\u0275fac=function(t){return new(t||e)(h.oc(c.c),h.oc(i.a))},e.\u0275prov=h.ac({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(f),E=n("EjjR"),B=n("Nj+8"),L=n("HW2h");n.d(e,"i",(function(){return m})),n.d(e,"f",(function(){return b.a})),n.d(e,"a",(function(){return i.a})),n.d(e,"h",(function(){return p})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return j})),n.d(e,"b",(function(){return D})),n.d(e,"g",(function(){return E.a})),n.d(e,"c",(function(){return B.a})),n.d(e,"j",(function(){return L.a}))},h8nD:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){return t.auth="json.htm?type=command&param=getauth",t.switches="json.htm?type=devices&filter=light&used=true",t.devices="json.htm?type=devices&filter={filter}&used=true",t.device="json.htm?type=devices&rid={idx}",t.renameDevice="json.htm?type=command&param=renamedevice&idx={idx}&name={name}",t.switchLight="json.htm?type=command&param=switchlight&idx={idx}&switchcmd={switchcmd}",t.refreshDevices="json.htm?type=devices&filter={filter}&used=true&lastupdate={lastupdate}",t.dimLevel="json.htm?type=command&param=switchlight&idx={idx}&switchcmd=Set%20Level&level={level}",t.colorBrightness="json.htm?type=command&param=setcolbrightnessvalue&idx={idx}&color={color}",t.kelvinLevel="json.htm?type=command&param=setkelvinlevel&idx={idx}&kelvin={kelvin}",t.tempGraph="json.htm?type=graph&sensor=temp&idx={idx}&range={range}",t.lightLog="json.htm?type=lightlog&idx={idx}",t.clearLog="json.htm?type=command&param=clearlightlog&idx={idx}",t}({})},qXXK:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("TYT/"),r=function(){function t(){}return t.prototype.getClientErrorMessage=function(t){return t.message?t.message:t.toString()},t.prototype.getServerErrorMessage=function(t){return navigator.onLine?t.message:"No Internet Connection"},t.\u0275prov=o.ac({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}()},sKXY:function(t,e){},zUnb:function(t,e,n){"use strict";n.r(e);var o=n("TYT/"),r=n("AytR"),i=n("E1rE"),c=n("cUzu"),a=n("ED2X"),s=n("c1wa"),u=n("DUip"),d=n("R4L2"),l=n("PCNd"),h=n("qXXK"),f=n("Y4+Y"),g=function(){function t(t){this.injector=t}return t.prototype.handleError=function(t){var e,n=this.injector.get(h.a),o=this.injector.get(f.a);t instanceof c.e?(e=n.getServerErrorMessage(t),o.notify(e)):(e=n.getClientErrorMessage(t),o.notify(e)),console.error(t)},t.\u0275fac=function(e){return new(e||t)(o.oc(o.y))},t.\u0275prov=o.ac({token:t,factory:t.\u0275fac}),t}(),m=n("67Y/"),b=n("15JJ"),p=n("dJ3e"),O=[{provide:c.a,useClass:function(){function t(t){this.dbService=t,this.settings$=this.dbService.select("settings")}return t.prototype.intercept=function(t,e){return this.settings$.pipe(Object(m.a)((function(e){try{if(Object.keys(e.credentials).every((function(t){return null!==e.credentials[t]}))){var n=btoa(e.credentials.username+":"+e.credentials.password);t=t.clone({headers:t.headers.set("Authorization","Basic "+n)})}}catch(o){}return t})),Object(b.a)((function(t){return e.handle(t)})))},t.\u0275fac=function(e){return new(e||t)(o.oc(p.a))},t.\u0275prov=o.ac({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),multi:!0}],v=d.c.variables,C=d.a.variables,P=d.a.variables,_=d.b.variables,y=[{name:"default",base:"default",variables:{temperature:{tooltipBg:v.bg,tooltipLineColor:v.fgText,tooltipLineWidth:"0",tooltipBorderColor:v.border2,tooltipExtraCss:"box-shadow: 0px 2px 46px 0 rgba(0, 255, 170, 0.35); border-radius: 10px; padding: 8px 24px;",tooltipTextColor:v.fgText,tooltipFontWeight:"normal",axisLineColor:v.border3,xAxisTextColor:v.fg,yAxisSplitLine:v.separator,itemBorderColor:v.border2,lineStyle:"dotted",lineWidth:"6",lineGradFrom:v.success,lineGradTo:v.warning,lineShadow:v.bg4,areaGradFrom:v.bg2,areaGradTo:v.bg3,shadowLineDarkBg:v.bg3}}},{name:"custom-cosmic",base:"custom-cosmic",variables:{temperature:{tooltipBg:C.bg,tooltipLineColor:C.fgText,tooltipLineWidth:"0",tooltipBorderColor:C.border2,tooltipExtraCss:"box-shadow: 0px 2px 46px 0 rgba(0, 255, 170, 0.35); border-radius: 10px; padding: 8px 24px;",tooltipTextColor:C.fgText,tooltipFontWeight:"normal",axisLineColor:C.border3,xAxisTextColor:C.fg,yAxisSplitLine:C.separator,itemBorderColor:C.border2,lineStyle:"dotted",lineWidth:"6",lineGradFrom:C.success,lineGradTo:C.warning,lineShadow:C.bg4,areaGradFrom:C.bg2,areaGradTo:C.bg3,shadowLineDarkBg:C.bg3}}},{name:"cosmic",base:"cosmic",variables:{temperature:{tooltipBg:P.bg,tooltipLineColor:P.fgText,tooltipLineWidth:"0",tooltipBorderColor:P.border2,tooltipExtraCss:"box-shadow: 0px 2px 46px 0 rgba(0, 255, 170, 0.35); border-radius: 10px; padding: 8px 24px;",tooltipTextColor:P.fgText,tooltipFontWeight:"normal",axisLineColor:P.border3,xAxisTextColor:P.fg,yAxisSplitLine:P.separator,itemBorderColor:P.border2,lineStyle:"dotted",lineWidth:"6",lineGradFrom:P.success,lineGradTo:P.warning,lineShadow:P.bg4,areaGradFrom:P.bg2,areaGradTo:P.bg3,shadowLineDarkBg:P.bg3}}},{name:"dark",base:"dark",variables:{temperature:{tooltipBg:_.bg,tooltipLineColor:_.fgText,tooltipLineWidth:"0",tooltipBorderColor:_.border2,tooltipExtraCss:"box-shadow: 0px 2px 46px 0 rgba(0, 255, 170, 0.35); border-radius: 10px; padding: 8px 24px;",tooltipTextColor:_.fgText,tooltipFontWeight:"normal",axisLineColor:_.border3,xAxisTextColor:_.fg,yAxisSplitLine:_.separator,itemBorderColor:_.border2,lineStyle:"dotted",lineWidth:"6",lineGradFrom:_.success,lineGradTo:_.warning,lineShadow:_.bg4,areaGradFrom:_.bg2,areaGradTo:_.bg3,shadowLineDarkBg:_.bg3}}}],M=n("VnD/"),k=n("xMyE"),w=n("aZ8m"),S=n("Valr"),x=n("J7ka"),j=n("PNQ/"),T=["updateDialog"];function I(t,e){if(1&t){var n=o.lc();o.kc(0,"nd-menu-sidebar",5),o.sc("outsideClick",(function(t){return o.Jc(n),o.vc().onMenuToggle()}))("themeSelected",(function(t){return o.Jc(n),o.vc().saveTheme(t)})),o.wc(1,"async"),o.jc()}if(2&t){var r=o.vc();o.Bc("animationState",r.menuState)("themes",r.themes)("selectedTheme",o.xc(1,3,r.selectedTheme$))}}function D(t,e){if(1&t){var n=o.lc();o.kc(0,"nb-card"),o.kc(1,"nb-card-header",6),o.Sc(2,"Update available"),o.jc(),o.kc(3,"nb-card-body",7),o.Sc(4),o.jc(),o.kc(5,"nb-card-footer",8),o.kc(6,"button",9),o.sc("click",(function(t){return o.Jc(n),o.vc().closeDialog()})),o.Sc(7,"Reload"),o.jc(),o.jc(),o.jc()}if(2&t){var r=e.$implicit;o.Pb(4),o.Tc(r)}}var E=function(){function t(t,e,n,o,i,c,a,s,u,d,l){var h=this;this.themeService=t,this.notifService=e,this.toastrService=n,this.dialogService=o,this.update=i,this.cd=c,this.router=a,this.swPush=s,this.dbService=u,this.pushService=d,this.themeSelectService=l,this.title=r.a.name,this.version=r.a.version,this.menuState="out",this.selectedTheme$=this.dbService.select("selectedTheme"),this.themes=[{label:"Cosmic (legacy)",theme:"custom-cosmic"},{label:"Cosmic",theme:"cosmic"},{label:"Light",theme:"default"},{label:"Dark",theme:"dark"}],this.notification$=this.notifService.notification.pipe(Object(M.a)((function(t){return!!t})),Object(k.a)((function(t){return h.toastrService.show(t,null,{position:"bottom-right",status:"danger",duration:5e3})}))),this.monitoredDevices$=this.dbService.select("monitoredDevices")}return t.prototype.ngOnInit=function(){var t=this;this.notification$.subscribe(),this.manageUpdate(),this.managePushNotifications(),this.router.events.pipe(Object(M.a)((function(t){return t instanceof u.b})),Object(k.a)((function(){r.a.production&&!r.a.domoticz&&fathom("trackPageview")})),Object(M.a)((function(){return t.showMenu})),Object(k.a)((function(){return t.onMenuToggle()}))).subscribe(),this.enableTheme()},t.prototype.enableTheme=function(){var t=this;this.selectedTheme$.pipe(Object(k.a)((function(e){return t.themeService.changeTheme(e)}))).subscribe()},t.prototype.saveTheme=function(t){return e=this,void 0,o=function(){var e,n;return function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.themeSelectService.saveTheme(t)];case 1:return e=o.sent(),console.log("\ud83d\udd8c "+e),[3,3];case 2:return n=o.sent(),console.error("\u26d4\ufe0f "+n),[3,3];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(t,r){function i(t){try{a(o.next(t))}catch(e){r(e)}}function c(t){try{a(o.throw(t))}catch(e){r(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(t){t(o)}))).then(i,c)}a((o=o.apply(e,[])).next())}));var e,n,o},t.prototype.manageUpdate=function(){var t=this;this.update.available.subscribe((function(){return t.dialogService.open(t.updateDialog,{context:"Reload to apply changes",hasBackdrop:!0})}))},t.prototype.managePushNotifications=function(){var t=this;this.swPush.messages.pipe(Object(M.a)((function(t){return"\ud83d\udd25 Push server up!"===t.notification.body})),Object(b.a)((function(){return t.monitoredDevices$})),Object(b.a)((function(e){if(e&&e.length)return t.pushService.initSubscriptions()}))).subscribe()},t.prototype.closeDialog=function(){window.location.reload()},t.prototype.onMenuToggle=function(){var t=this;this.showMenu?(this.menuState="out",setTimeout((function(){t.showMenu=!1,t.cd.detectChanges()}),400)):(this.menuState="in",this.showMenu=!0)},t.\u0275fac=function(e){return new(e||t)(o.ec(d.rb),o.ec(p.f),o.ec(d.tb),o.ec(d.u),o.ec(s.c),o.ec(o.i),o.ec(u.d),o.ec(s.b),o.ec(p.a),o.ec(p.g),o.ec(p.j))},t.\u0275cmp=o.Yb({type:t,selectors:[["nd-root"]],viewQuery:function(t,e){var n;1&t&&o.Oc(T,!0),2&t&&o.Gc(n=o.tc())&&(e.updateDialog=n.first)},decls:12,vars:9,consts:[[1,"header"],[3,"themes","selectedTheme","menuToggle","themeSelected"],["fixed",""],[3,"animationState","themes","selectedTheme","outsideClick","themeSelected",4,"ngIf"],["updateDialog",""],[3,"animationState","themes","selectedTheme","outsideClick","themeSelected"],["id","dialog-header",1,"center"],[1,"center","dialog-body"],[1,"center"],["nbButton","",3,"click"]],template:function(t,e){1&t&&(o.kc(0,"nb-layout"),o.kc(1,"nb-layout-header",0),o.kc(2,"nd-header",1),o.sc("menuToggle",(function(t){return e.onMenuToggle()}))("themeSelected",(function(t){return e.saveTheme(t)})),o.wc(3,"async"),o.jc(),o.jc(),o.kc(4,"nb-layout-column"),o.fc(5,"router-outlet"),o.jc(),o.kc(6,"nb-layout-footer",2),o.Sc(7),o.jc(),o.jc(),o.Qc(8,I,2,5,"nd-menu-sidebar",3),o.fc(9,"nd-settings-sidebar"),o.Qc(10,D,8,1,"ng-template",null,4,o.Rc)),2&t&&(o.Pb(2),o.Bc("themes",e.themes)("selectedTheme",o.xc(3,7,e.selectedTheme$)),o.Pb(2),o.Tb("content ",e.menuState,""),o.Pb(3),o.Uc(" ",e.version," "),o.Pb(1),o.Bc("ngIf",e.showMenu))},directives:[d.O,d.Q,w.a,d.N,u.i,d.P,S.u,x.a,j.a,d.h,d.k,d.g,d.i,d.d],pipes:[S.b],styles:[".nb-theme-dark   [_nghost-%COMP%]   #dialog-header[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   .dialog-body[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   #dialog-header[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   .dialog-body[_ngcontent-%COMP%]{color:#36f}.nb-theme-cosmic   [_nghost-%COMP%]   #dialog-header[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   .dialog-body[_ngcontent-%COMP%]{color:#a16eff}.nb-theme-custom-cosmic   [_nghost-%COMP%]   #dialog-header[_ngcontent-%COMP%], .nb-theme-custom-cosmic   [_nghost-%COMP%]   .dialog-body[_ngcontent-%COMP%]{color:#fff}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;z-index:10001}.header[_ngcontent-%COMP%]   nd-header[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{margin:5rem 0 0}.center[_ngcontent-%COMP%]{text-align:center}"]}),t}(),B=[{path:"devices",loadChildren:function(){return n.e(7).then(n.bind(null,"Kbl2")).then((function(t){return t.DevicesModule}))}},{path:"options/:idx",loadChildren:function(){return n.e(6).then(n.bind(null,"l1Lx")).then((function(t){return t.DeviceOptionsModule}))}},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}],L=n("6I4f"),N=n("Nj+8"),R=n("UxRr"),F=n("EjjR"),Y=n("HW2h"),A=function(){function t(t,e,n,o,r){this.dbService=t,this.iconService=e,this.monitorService=n,this.pushSubService=o,this.themeSelectService=r}return t.prototype.init=function(){return t=this,void 0,n=function(){var t=this;return function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){return[2,this.dbService.openDb().then((function(){t.iconService.syncDeviceIcons(),t.monitorService.syncMonitoredDevices(),t.dbService.syncSettings(),t.pushSubService.syncPushSub(),t.themeSelectService.syncTheme()}))]}))},new((e=void 0)||(e=Promise))((function(o,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,c)}a((n=n.apply(t,[])).next())}));var t,e,n},t.\u0275fac=function(e){return new(e||t)(o.oc(L.a),o.oc(N.a),o.oc(R.a),o.oc(F.a),o.oc(Y.a))},t.\u0275prov=o.ac({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function J(t){return function(){return t.init()}}var G=function(){function t(){}return t.prototype.ngDoBootstrap=function(t){this.app=t},t.\u0275mod=o.cc({type:t,bootstrap:[E]}),t.\u0275inj=o.bc({factory:function(e){return new(e||t)},providers:[{provide:o.q,useClass:g},O,{provide:o.d,useFactory:J,deps:[A],multi:!0}],imports:[[i.a,c.d,u.h.forRoot(B,{useHash:r.a.domoticz,scrollPositionRestoration:"enabled"}),a.a,d.qb.forRoot({name:"default"},y),d.R,d.t.forRoot(),d.e,l.a,s.a.register("/ngx-domoboard/ngsw-worker.js",{enabled:r.a.production}),d.sb.forRoot()]]}),t}();r.a.production&&Object(o.fb)(),i.c().bootstrapModule(G).catch((function(t){return console.error(t)}))}},[[0,0,5]]]);